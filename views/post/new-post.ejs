<!-- views/post/new-post.ejs -->
<%- include('../header/head.ejs') %>

    <body class="bg-gray-100">
        <!-- sidebar start here -->
        <div class="flex overflow-hidden">
            <%- include('../sidenav/sidenav.ejs') %>
                <div class="page-content bg-white">

                    <%- include('../header/header.ejs') %>

                        <!-- main content start here -->
                        <form action="/post/create" method="post" enctype="multipart/form-data">
                            <div id="top-bttns" class="flex justify-end gap-2 border-b py-5 shadow-sm bg-white">
                                <button type="button" aria-disabled="true"
                                    class="py-2 px-4 text-[#949494] cursor-not-allowed" aria-label="Save draft"
                                    onclick="setStatus('Draft')">Save draft</button>
                                <button type="button" aria-disabled="true" aria-expanded="false"
                                    class="py-2 px-4 text-white bg-[#007BFF] rounded-lg cursor-not-allowed opacity-25"
                                    onclick="setStatus('Published')">Publish</button>
                                <input type="hidden" name="status" id="status" value="">

                                <!-- data-simplebar -->
                                <%- include('../sidenav/data-simplebar.ejs') %>
                            </div>
                            <div class="">
                                <main class="py-8 px-5">
                                    <div class="max-w-3xl mx-auto">
                                        <div class="mb-6">
                                            <label for="title" class="mb-3 text-sm">Title:<span
                                                    class="text-red-600">*</span></label>
                                            <input type="text" id="title" name="title" required
                                                class="form-input bg-[#F0F7FA] border-0 mb-3">
                                        </div>
                                        <div class="mb-6">
                                            <label for="heading" class="mb-3 text-sm">Heading:<span
                                                    class="text-red-600">*</span></label>
                                            <input type="text" id="heading" name="heading" required
                                                class="form-input bg-[#F0F7FA] border-0 mb-3">
                                        </div>
                                        <div class="mb-6">
                                            <label for="description" class="mb-3 text-sm">Description:<span
                                                    class="text-red-600">*</span></label>
                                            <textarea id="editor" name="description" required
                                                class="form-input content bg-[#F0F7FA] border-0 mb-3"></textarea>
                                        </div>
                                        <div class="mb-6">
                                            <label class="mb-3 text-sm" for="uploadImage1">Thumbnail Photo image<span
                                                    class="text-red-600">*</span></label>
                                            <div class="uploadImg-Preview mb-6">
                                                <img id="preview_img" class="object-cover" src="/images/no-image.svg"
                                                    alt="Upload Image">
                                            </div>

                                            <div class="block relative">
                                                <span
                                                    class="absolute inset-0 opacity-100 w-40 h-12 leading-[48px] top-0 text-black bg-[#DBF4FF] rounded-lg text-center cursor-pointer">Select
                                                    Image</span>
                                                <input type="file" name="picture__input" id="picture__input"
                                                    onchange="loadFile(event)"
                                                    class="block w-40 h-12 file:text-sm file:bg-white file:px-0 file:mt-2 opacity-0"
                                                    required>
                                            </div>
                                        </div>
                                        <div class="form-group mb-6">
                                            <label class="mb-3 text-sm" for="metaRobots">
                                                Categories
                                            </label>
                                            <select class="form-select bg-[#F0F7FA] border-0 mb-3" id="metaRobots"
                                                name="category">
                                                <% categories.forEach(category=> { %>
                                                    <option value="<%= category._id %>">
                                                        <%= category.name %>
                                                    </option>
                                                    <% }); %>
                                            </select>
                                        </div>
                                        <div class="mb-6">
                                            <label class="mb-3 text-sm" for="uploadImage1">Feature image<span
                                                    class="text-red-600">*</span></label>
                                            <div class="uploadImg-Preview mb-6">
                                                <img id="feature_image" class="object-cover" src="/images/no-image.svg"
                                                    alt="Upload Image">
                                            </div>
                                            <div class="block relative">
                                                <span
                                                    class="absolute inset-0 opacity-100 w-40 h-12 leading-[48px] top-0 text-black bg-[#DBF4FF] rounded-lg text-center cursor-pointer">Select
                                                    Image</span>
                                                <input type="file" name="feature_img" id="feature_img"
                                                    onchange="loadFile2(event)"
                                                    class="block w-40 h-12 file:text-sm file:bg-white file:px-0 file:mt-2 opacity-0"
                                                    required>
                                            </div>
                                        </div>
  <!-- seo tabs start -->
  <nav id="seoTabs" class="flex mt-8 ml-2 md:pl-3 md:ml-4" aria-label="Tabs"
  role="tablist">
  <button type="button"
      class="hs-tabs bg-white py-2 md:px-5 px-4 inline-flex items-center gap-2 border transition-all whitespace-nowrap hover:text-[#007bff] text-lg rounded-tl-[5px] active"
      id="home-item-3" data-hs-tab="#home-3" aria-controls="home-3"
      role="tab">
      <span class="">SEO</span>
  </button>
</nav>

<div class="border mt-[-1px] rounded-[5px]">
  <div id="home-3" class="p-6" role="tabpanel" aria-labelledby="home-item-3">
      <div class="mb-6 form-group">
          <label class="mb-3 text-sm" for="seoTitle">SEO Title</label>
          <input name="seoTitle" id="seoTitle" type="text"
              class="form-input bg-[#F0F7FA] border-0 mb-3"
              placeholder="Enter SEO Title">
      </div>

      <div class="mb-6 form-group">
          <label class="mb-3 text-sm" for="seoslug">Slug</label>
          <input name="seoslug" id="seoslug" type="text" value=""
              class="form-input bg-[#F0F7FA] border-0 mb-3">
      </div>

      <div class="mb-6 form-group">
          <label class="mb-3 text-sm" for="seoMetaDescription">Meta
              description</label>
          <textarea id="seoMetaDescription" name="seoMetaDescription"
              class="form-input bg-[#F0F7FA] border-0 mb-3"></textarea>
      </div>
      <div class="mb-6 form-group">
          <label class="mb-3 text-sm" for="searchEngines">Allow search engines
              to
              show this content in search results?
          </label>
          <select class="form-select bg-[#F0F7FA] border-0 mb-3"
              id="searchEngines" name="searchEngines">
              <option selected="selected" value="0">Yes (current default for
                  Pages)</option>
              <option value="1">No</option>
              <option value="2">Yes</option>
          </select>
      </div>

      <div class="mb-6 form-group">
          <label class="mb-3 text-sm">Should search engines follow links on
              this
              content?
          </label>
          <div class="flex gap-x-6">
              <div class="flex items-center">
                  <input type="radio" name="hs-radio-group"
                      class="shrink-0 mt-0.5 border-gray-200 rounded-full text-blue-600 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"
                      id="hs-radio-group-1" checked>
                  <label for="hs-radio-group-1"
                      class="text-sm text-gray-500 ms-2">Yes</label>
              </div>
              <div class="flex items-center">
                  <input type="radio" name="hs-radio-group"
                      class="shrink-0 mt-0.5 border-gray-200 rounded-full text-blue-600 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"
                      id="hs-radio-group-2">
                  <label for="hs-radio-group-2"
                      class="text-sm text-gray-500 ms-2">No</label>
              </div>
          </div>
      </div>
      <div class="mb-6 form-group">
          <label class="mb-3 text-sm" for="metaRobots">
              Meta robots advanced
          </label>
          <select class="form-select bg-[#F0F7FA] border-0 mb-3"
              id="metaRobots" name="metaRobots">
              <option value="0">No Image Index</option>
              <option value="1">No Archive</option>
              <option value="2">No Snippet</option>
          </select>
      </div>
      <div class="mb-6 form-group">
          <label class="mb-3 text-sm" for="breadcrumbsTitle">Breadcrumbs
              Title</label>
          <input name="breadcrumbsTitle" id="breadcrumbsTitle" type="text"
              value="" class="form-input bg-[#F0F7FA] border-0 mb-3">
      </div>

      <div class="form-group">
          <label class="mb-3 text-sm" for="canonicalURL">Canonical URL</label>
          <input name="canonicalURL" id="canonicalURL" type="text" value=""
              class="form-input bg-[#F0F7FA] border-0 mb-3">
      </div>
  </div>

</div>                                        
                        </form>
                </div>
                </main>
        </div>
        </div>
    </body>
    <!-- Include Froala Editor script. -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script>
        let thumbnailImgSelected = false;
        let featureImgSelected = false;
        let publishButton = document.querySelector('.publish-button'); // Add a class to your Publish button and select it here
        function checkImagesLoaded() {
            if (thumbnailImgSelected && featureImgSelected) {
                publishButton.disabled = false; // Enable the Publish button when both images have loaded
            }
        }
        function setStatus(status) {
            console.log('setStatus');
            // Perform validation
            let title = document.getElementById('title').value;
            let heading = document.getElementById('heading').value;
            let description = document.getElementById('editor').value;

            if (!thumbnailImgSelected || !featureImgSelected) {
                alert('Both Thumbnail Photo image and Feature image are required');
                return; // Stop the function if validation fails
            }
            if (!title || !heading || !description) {
                alert('Title, Heading, and Description are required');
                return; // Stop the function if validation fails
            }
            // Set the status and submit the form
            document.getElementById('status').value = status;

            Toastify({
                text: "Post Created Successful!",
                duration: 10000,
                close: true
            }).showToast();

            document.querySelector('form').submit();
        }
    </script>
    <%- include('../script/script.ejs') %>

        </html>